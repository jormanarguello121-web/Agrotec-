<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgroTec - Dashboard Agricultor</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="agricultor.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸŒ± AgroTec</h1>
            <p>Panel del Agricultor</p>
        </header>

        <nav class="navbar">
            <a href="dashboard.html" class="nav-link active">Inicio</a>
            <a href="productos.html" class="nav-link">Mis Productos</a>
            <a href="informacion.html" class="nav-link">InformaciÃ³n</a>
            <a href="/" class="nav-link">Salir</a>
        </nav>

        <main>
            <!-- InformaciÃ³n del usuario -->
            <section class="user-welcome">
                <div class="welcome-card">
                    <h2>Â¡Bienvenido, <span id="userName">Agricultor</span>!</h2>
                    <p>Gestiona tu producciÃ³n y ventas agrÃ­colas</p>
                    <div class="user-stats">
                        <div class="stat-card">
                            <h3 id="totalProductos">0</h3>
                            <p>Productos Activos</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="productosVendidos">0</h3>
                            <p>Productos Vendidos</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="ingresosTotales">$0</h3>
                            <p>Ingresos Totales</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Acciones rÃ¡pidas -->
            <section class="quick-actions">
                <h2>Acciones RÃ¡pidas</h2>
                <div class="action-grid">
                    <div class="action-card" onclick="location.href='productos.html'">
                        <div class="action-icon">ðŸ“¦</div>
                        <h3>Gestionar Productos</h3>
                        <p>Agregar, editar o eliminar productos</p>
                    </div>
                    
                    <div class="action-card" onclick="location.href='informacion.html'">
                        <div class="action-icon">ðŸŒ¿</div>
                        <h3>InformaciÃ³n AgrÃ­cola</h3>
                        <p>GuÃ­as y tips para tus cultivos</p>
                    </div>
                    
                    <div class="action-card" onclick="agregarProductoRapido()">
                        <div class="action-icon">âž•</div>
                        <h3>Agregar Producto</h3>
                        <p>Nuevo producto rÃ¡pido</p>
                    </div>
                    
                    <div class="action-card" onclick="verEstadisticas()">
                        <div class="action-icon">ðŸ“Š</div>
                        <h3>EstadÃ­sticas</h3>
                        <p>Ver reportes de ventas</p>
                    </div>
                </div>
            </section>

            <!-- Productos recientes -->
            <section class="recent-products">
                <h2>Mis Productos Recientes</h2>
                <div id="listaProductos" class="products-grid">
                    <!-- Los productos se cargarÃ¡n aquÃ­ con JavaScript -->
                    <div class="no-products">
                        <p>No tienes productos registrados</p>
                        <button onclick="location.href='productos.html'" class="btn btn-primary">
                            Agregar Primer Producto
                        </button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal para agregar producto rÃ¡pido -->
    <div id="modalProducto" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="cerrarModal()">&times;</span>
            <h3>Agregar Producto RÃ¡pido</h3>
            <form id="formProductoRapido">
                <div class="form-group">
                    <label for="nombreProducto">Nombre del Producto:</label>
                    <input type="text" id="nombreProducto" required>
                </div>
                <div class="form-group">
                    <label for="precioProducto">Precio por kg:</label>
                    <input type="number" id="precioProducto" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="cantidadProducto">Cantidad disponible (kg):</label>
                    <input type="number" id="cantidadProducto" required>
                </div>
                <button type="submit" class="btn btn-primary">Agregar Producto</button>
            </form>
        </div>
    </div>

    <script src="../js/auth.js"></script>
    <script src="../js/agricultor.js"></script>
    <script>
        // Verificar que el usuario estÃ© logueado y sea agricultor
        document.addEventListener('DOMContentLoaded', function() {
            const usuario = JSON.parse(localStorage.getItem('usuario'));
            if (!usuario || usuario.rol !== 'agricultor') {
                window.location.href = '/login.html';
                return;
            }
            
            document.getElementById('userName').textContent = usuario.nombre;
            cargarEstadisticas();
            cargarProductosRecientes();
        });

        function agregarProductoRapido() {
            document.getElementById('modalProducto').style.display = 'block';
        }

        function cerrarModal() {
            document.getElementById('modalProducto').style.display = 'none';
        }

        function cargarEstadisticas() {
            // AquÃ­ cargaremos las estadÃ­sticas reales
            document.getElementById('totalProductos').textContent = '5';
            document.getElementById('productosVendidos').textContent = '23';
            document.getElementById('ingresosTotales').textContent = '$1,250';
        }

        function cargarProductosRecientes() {
            // AquÃ­ cargaremos los productos reales
        }

        function verEstadisticas() {
            alert('Funcionalidad de estadÃ­sticas en desarrollo');
        }

        // Cerrar modal al hacer clic fuera
        window.onclick = function(event) {
            const modal = document.getElementById('modalProducto');
            if (event.target === modal) {
                cerrarModal();
            }
        }
    </script>
</body>
</html>
